<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Live Summary Tool</title>
<style>
  body {
    font-family: Arial, sans-serif;
    margin: 2rem;
    background: #f9f9f9;
  }
  textarea {
    width: 100%;
    height: 150px;
    font-size: 1rem;
    padding: 0.5rem;
    margin-bottom: 1rem;
    resize: vertical;
  }
  .summary {
    margin-bottom: 2rem;
  }
  .summary > div {
    margin: 0.3rem 0;
  }
  canvas {
    max-width: 100%;
    height: 300px;
  }
</style>
</head>
<body>

<h1>Live Summary Tool</h1>
<textarea id="inputText" placeholder="Type or paste your text here..."></textarea>

<div class="summary">
  <div><strong>Sentence count:</strong> <span id="sentenceCount">0</span></div>
  <div><strong>Paragraph count:</strong> <span id="paragraphCount">0</span></div>
  <div><strong>Most frequent word:</strong> <span id="mostFreqWord">-</span></div>
</div>

<canvas id="freqChart"></canvas>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
  const input = document.getElementById('inputText');
  const sentenceCountEl = document.getElementById('sentenceCount');
  const paragraphCountEl = document.getElementById('paragraphCount');
  const mostFreqWordEl = document.getElementById('mostFreqWord');
  const ctx = document.getElementById('freqChart').getContext('2d');
  
  let chart;

  function updateSummary() {
    const text = input.value.trim();

   
    let sentences = text.split(/[.!?]+/).filter(s => s.trim().length > 0);
    sentenceCountEl.textContent = sentences.length;

    
    let paragraphs = text.split(/\n+/).filter(p => p.trim().length > 0);
    paragraphCountEl.textContent = paragraphs.length;

    
    const words = text.toLowerCase()
      .replace(/[^a-z0-9'\s]/g, '')
      .split(/\s+/)
      .filter(w => w.length > 0);

    const freq = {};
    words.forEach(w => freq[w] = (freq[w] || 0) + 1);

    
    let mostFreq = '-';
    let maxCount = 0;
    for (const [word, count] of Object.entries(freq)) {
      if (count > maxCount) {
        maxCount = count;
        mostFreq = word;
      }
    }
    mostFreqWordEl.textContent = maxCount > 0 ? `${mostFreq} (${maxCount})` : '-';

    
    const sortedWords = Object.entries(freq)
      .sort((a, b) => b[1] - a[1])
      .slice(0, 10);

    const labels = sortedWords.map(e => e[0]);
    const data = sortedWords.map(e => e[1]);

    if (chart) {
      chart.data.labels = labels;
      chart.data.datasets[0].data = data;
      chart.update();
    } else {
      chart = new Chart(ctx, {
        type: 'bar',
        data: {
          labels,
          datasets: [{
            label: 'Word Frequency',
            data,
            backgroundColor: 'rgba(54, 162, 235, 0.7)',
            borderColor: 'rgba(54, 162, 235, 1)',
            borderWidth: 1,
            borderRadius: 4,
          }]
        },
        options: {
          responsive: true,
          scales: {
            y: {
              beginAtZero: true,
              precision: 0,
              title: {
                display: true,
                text: 'Count'
              }
            },
            x: {
              title: {
                display: true,
                text: 'Words'
              }
            }
          },
          plugins: {
            legend: { display: false },
            tooltip: { enabled: true }
          }
        }
      });
    }
  }

  input.addEventListener('input', updateSummary);
  updateSummary();
</script>

</body>
</html>
